# ============================================================
# API GATEWAY — Spring Cloud Gateway (port 9000)
# ============================================================
server.port=9000
spring.application.name=api-gateway

# ============================================================
# EUREKA — Service Discovery
# ============================================================
eureka.client.service-url.defaultZone=http://localhost:8761/eureka/

# ============================================================
# ROUTE DEFINITIONS — Path-based routing via Eureka (lb://)
# ============================================================

# Route 1: /greeting → greeting-service (discovered via Eureka)
spring.cloud.gateway.routes[0].id=greeting-service
spring.cloud.gateway.routes[0].uri=lb://greeting-service
spring.cloud.gateway.routes[0].predicates[0]=Path=/greeting

# Route 2: /time/** → time-service (discovered via Eureka)
spring.cloud.gateway.routes[1].id=time-service
spring.cloud.gateway.routes[1].uri=lb://time-service
spring.cloud.gateway.routes[1].predicates[0]=Path=/time,/time/**

# Route 3: /hello → greeting-service (rewrite /hello → /greeting)
spring.cloud.gateway.routes[2].id=hello-rewrite
spring.cloud.gateway.routes[2].uri=lb://greeting-service
spring.cloud.gateway.routes[2].predicates[0]=Path=/hello
spring.cloud.gateway.routes[2].filters[0]=RewritePath=/hello, /greeting

# ============================================================
# CORS — Allow browser clients to call the gateway
# ============================================================
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-origins=http://localhost:3000
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-methods=GET,POST,PUT,DELETE,OPTIONS
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-headers=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allow-credentials=true

# ============================================================
# ACTUATOR — Health endpoint for readiness checks
# ============================================================
management.endpoints.web.exposure.include=health
