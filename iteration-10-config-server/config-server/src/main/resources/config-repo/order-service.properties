# ============================================================
# ORDER SERVICE â€” port 8080
# ============================================================
server.port=8080
spring.datasource.url=jdbc:h2:mem:ftgo

# Kafka consumer group
spring.kafka.consumer.group-id=order-service

# ============================================================
# RESILIENCE4J CONFIGURATION
# ============================================================

# --- @CircuitBreaker for accountingService ---
resilience4j.circuitbreaker.instances.accountingService.sliding-window-size=5
resilience4j.circuitbreaker.instances.accountingService.failure-rate-threshold=50
resilience4j.circuitbreaker.instances.accountingService.wait-duration-in-open-state=10s
resilience4j.circuitbreaker.instances.accountingService.permitted-number-of-calls-in-half-open-state=2
resilience4j.circuitbreaker.instances.accountingService.minimum-number-of-calls=3

# --- @CircuitBreaker for restaurantService ---
resilience4j.circuitbreaker.instances.restaurantService.sliding-window-size=5
resilience4j.circuitbreaker.instances.restaurantService.failure-rate-threshold=50
resilience4j.circuitbreaker.instances.restaurantService.wait-duration-in-open-state=15s
resilience4j.circuitbreaker.instances.restaurantService.permitted-number-of-calls-in-half-open-state=2
resilience4j.circuitbreaker.instances.restaurantService.minimum-number-of-calls=3

# --- @CircuitBreaker for kitchenService ---
resilience4j.circuitbreaker.instances.kitchenService.sliding-window-size=5
resilience4j.circuitbreaker.instances.kitchenService.failure-rate-threshold=50
resilience4j.circuitbreaker.instances.kitchenService.wait-duration-in-open-state=10s
resilience4j.circuitbreaker.instances.kitchenService.permitted-number-of-calls-in-half-open-state=2
resilience4j.circuitbreaker.instances.kitchenService.minimum-number-of-calls=3

# --- @CircuitBreaker for deliveryService ---
resilience4j.circuitbreaker.instances.deliveryService.sliding-window-size=5
resilience4j.circuitbreaker.instances.deliveryService.failure-rate-threshold=50
resilience4j.circuitbreaker.instances.deliveryService.wait-duration-in-open-state=10s
resilience4j.circuitbreaker.instances.deliveryService.permitted-number-of-calls-in-half-open-state=2
resilience4j.circuitbreaker.instances.deliveryService.minimum-number-of-calls=3

# --- @Retry for restaurantService ---
resilience4j.retry.instances.restaurantService.max-attempts=3
resilience4j.retry.instances.restaurantService.wait-duration=500ms
resilience4j.retry.instances.restaurantService.enable-exponential-backoff=true
resilience4j.retry.instances.restaurantService.exponential-backoff-multiplier=2

# --- @Bulkhead for restaurantService ---
resilience4j.bulkhead.instances.restaurantService.max-concurrent-calls=5
resilience4j.bulkhead.instances.restaurantService.max-wait-duration=500ms
